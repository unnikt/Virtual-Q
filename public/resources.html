<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>VirQ.app</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&amp;display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Montserrat&amp;display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/calendar.css">
    <link rel="shortcut icon" href="#">
    <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
    <script src="/__/firebase/7.14.5/firebase-app.js"></script>
    <!-- Add Firebase products that you want to use -->
    <script src="/__/firebase/7.14.5/firebase-auth.js"></script>
    <!-- Initialize Firebase -->
    <script src="/__/firebase/init.js"></script>
    <script>
        try {
            const auth = firebase.auth();
            auth.onAuthStateChanged(user => { if (!user) window.location = "/"; })
        }
        catch (err) { console.log(err); }
    </script>
    <style>
        .list-type-1 {
            list-style: none;
            padding: 8px;
            height: 50vh;
            border: 1px solid var(--border-color);
            overflow-y: scroll;
        }

        .list-type-1>li {
            margin: 4px 0;
            padding: 12px;
            background-color: var(--light-background);
        }

        .list>div {
            padding: 12px;
            margin: 2px;
            background-color: var(--light-background);
        }
        .header{
            background-color: teal;
        }
    </style>
</head>

<body data-gr-c-s-loaded="true">
    <div class="bbdr" style="display: flex;">
        <p class="apptitle"> VirQ.app</p>
        <i id="mainIcn" class="material-icons gicon-regular" style="z-index: 2;" onclick="togmenu()">menu</i>
    </div>
    <div id="mainNav" class="mainMenu">
        <select name="" id="lstBus" onchange="setBid()">
            <option value="A03kpawiQBURtJ58HlQ6">Curtis Aviation</option>
        </select>
        <div class="gridicons">
            <div class="icontiles" onclick="redirect('booknew.html?bid=')">
                <i class="material-icons gicon-regular">assignment</i>
                <h4>Booking</h4>
            </div>
            <div class="icontiles" onclick="redirect('calendar?bid=')">
                <i class="material-icons gicon-regular">event</i>
                <h4>Calendar</h4>
            </div>
            <div class="icontiles" onclick="redirect('vwservices?bid=')">
                <i class="material-icons gicon-regular">widgets</i>
                <h4>Services</h4>
            </div>
            <div class="icontiles" onclick="redirect('resources.html?bid=')">
                <i class="material-icons gicon-regular">business_center</i>
                <h4>Resources</h4>
            </div>
            <div class="icontiles" onclick="redirect('settings?bid=')">
                <i class="material-icons gicon-regular">settings</i>
                <h4>Settings</h4>
            </div>
            <div class="icontiles" onclick="auth.signOut()">
                <i class="material-icons gicon-regular">double_arrow</i>
                <h4>Log out</h4>
            </div>
        </div>
    </div>
    <div class="grid nopad">
        <div class="tabs-type-2" id="dvIcons">
            <a onclick="setTab(this,'dvResType')" id="tab1">Resource Types</a>
            <a onclick="setTab(this,'dvResources')" id="tab2">Resources</a>
        </div>
        <div id="dvResType" hidden>
            <div id="btnAdd" class="bbdr" style="display: grid; grid-template-columns: 11fr 1fr;">
                <h4>Create a new Resource Type</h4>
                <i id="icnNew" class="material-icons" style="display:inline-block;">add</i>
            </div>
            <div id="dvNew" hidden>
                <form class="shdw pada-12" action="/addResType" method="POST">
                    <input type="text" name="bid" value="A03kpawiQBURtJ58HlQ6" style="display: none;">
                    <input type="text" id="Name" name="resType"
                        placeholder="Resource Type (e.g. Instructor, Aircraft..etc)" required autocomplete="off">
                    <input class="btn" type="submit" id="btnSave" value="Create">
                </form>
            </div>
            <ul class="list-type-1">
                <li>Instructor</li>
                <li>Aircraft</li>
                <li>Headset</li>
                <li>Instructor</li>
                <li>Aircraft</li>
                <li>Headset</li>
            </ul>
        </div>
        <div id="dvResources" hidden>
            <h4>Resources</h4>
            <input type="text" id="filter" onkeyup="filterList()" placeholder="Search resources.."
                title="Type in a name">
            <div id="dvResList" class="grid list" style="grid-template-columns: 2fr 5fr 5fr;">
                <div>JAZ</div>
                <div>Aircraft</div>
                <div>Piper Cherokee</div>
                <div>WKM</div>
                <div>Aircraft</div>
                <div>Citabria</div>
                <div>LJL</div>
                <div>Aircraft</div>
                <div>Piper Cherokee</div>
                <div>JKL</div>
                <div>Instructor</div>
                <div>John Kelly</div>
                <div>KWL</div>
                <div>Instructor</div>
                <div>Kevin Warrel</div>
            </div>
        </div>
    </div>
    <script src="js/app.js"></script>
    <script src="js/events.js"></script>
    <script src="js/tabs.js"></script>
    <script defer>
        setTab(get('tab2'), 'dvResources');

        const frmNewType = get('dvNew').style;
        get('btnAdd').addEventListener('click', (e) => {
            frmNewType.display = (frmNewType.display == 'block') ? 'none' : 'block';
            get('icnNew').innerText = (frmNewType.display == 'block') ? 'close' : 'add';
        })
        const mainNav = get('mainNav').style; const mainIcn = get('mainIcn');
        function togmenu() {
            if (mainNav.height == '100%') { mainNav.height = "0%"; mainIcn.innerText = 'menu'; }
            else { mainNav.height = '100%'; mainIcn.innerText = 'close'; }
        }
        if (typeof bid === "undefined") bid = document.getElementById('lstBus').value;
        function redirect(page) { window.location = page + bid; }
        function get(el) { return document.getElementById(el) }

        function filterList() {
            const dvResList = get('dvResList').children;
            const records = dvResList.length;
            const filter = get('filter').value.toUpperCase();
            var recVal;
            for (i = 3; i < records; i += 3) {
                recVal = [dvResList[i].innerText, dvResList[i + 1].innerText, dvResList[i + 2].innerText].join(' ');
                let disp = (recVal.toUpperCase().indexOf(filter) > -1) ? "block" : "none";
                dvResList[i].style.display = dvResList[i + 1].style.display = dvResList[i + 2].style.display = disp;
            }
        }

    </script>

</body>

</html>
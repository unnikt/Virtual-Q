<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book New</title>
    <link rel="shortcut icon" href="">

    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Montserrat&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/calendar.css">
    <link rel="stylesheet" href="css/booknew.css">
    <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
    <script src="/__/firebase/7.14.5/firebase-app.js"></script>
    <!-- Add Firebase products that you want to use -->
    <script src="/__/firebase/7.14.5/firebase-auth.js"></script>
    <!-- Initialize Firebase -->
    <script src="/__/firebase/init.js"></script>
    <!-- <script>
        const auth = firebase.auth();
        auth.onAuthStateChanged(user => (user) ? fetchBusiness() : window.location = "/");
    </script> -->
    <script src="js/app.js"></script>
    <script src="js/business.js" defer></script>
    <style>
        .slide {
            position: relative;
            right: -700px;
            transition: 0.4s ease;
        }

        .grid-review {
            display: grid;
            grid-template-columns: 1fr 9fr 2fr;
            margin-top: 4px;
            background-color: var(--light-background);
            row-gap: 2px;
        }

        .grid-review>i,
        label,
        button {
            padding: 8px;
            margin: 8px;
        }
    </style>

</head>

<body>
    <div class="bbdr" style="display: flex;">
        <p class="apptitle"> VirQ.app</p>
        <i id="mainIcn" class="material-icons gicon-regular" style="z-index: 2;" onclick="togmenu(this)">menu</i>
    </div>
    <div id="mainNav" class="mainMenu">
        <select name="" id="lstBus" onchange="setBid()">
            <option value="A03kpawiQBURtJ58HlQ6">Curtis Aviation</option>
        </select>
        <div class="gridicons">
            <div class="icontiles" onclick="redirect('booknew.html?bid=')">
                <i class="material-icons gicon-regular">assignment</i>
                <h4>Booking</h4>
            </div>
            <div class="icontiles" onclick="redirect('calendar?bid=')">
                <i class="material-icons gicon-regular">event</i>
                <h4>Calendar</h4>
            </div>
            <div class="icontiles" onclick="redirect('vwservices?bid=')">
                <i class="material-icons gicon-regular">widgets</i>
                <h4>Services</h4>
            </div>
            <div class="icontiles" onclick="redirect('vwservices?bid=')">
                <i class="material-icons gicon-regular">business_center</i>
                <h4>Resources</h4>
            </div>
            <div class="icontiles" onclick="redirect('settings?bid=')">
                <i class="material-icons gicon-regular">settings</i>
                <h4>Settings</h4>
            </div>
            <div class="icontiles" onclick="auth.signOut()">
                <i class="material-icons gicon-regular">double_arrow</i>
                <h4>Log out</h4>
            </div>
        </div>
    </div>
    <div class="grid-review">
        <i class="material-icons" onclick="setTab('divCustomer')"> person</i>
        <label id="lblCustomer" onclick="setTab('divCustomer')">Customer Details</label>
        <i class="material-icons " onclick="searchCustomer('create')">check</i>
    </div>
    <div class="grid" id="divCustomer">
        <div id="divSearch" class="grid" style="display: grid; grid-template-columns: 11fr 1fr;">
            <input id="inpSearch" type="text" class="searchbox" placeholder="Enter email / phone" tabindex="1"
                style="margin: 0;">
            <i id="iSearch" class="material-icons" tabindex="2" onclick="searchCustomer('find')">search</i>
        </div>
        <div class="grid">
            <label for="">Or Add new Customer</label>
            <form id="newuser" onsubmit="return false;">
                <input type="text" id="fname" placeholder="First Name" autocomplete="given-name" required>
                <input type="text" id="sname" placeholder="Sur Name" autocomplete="family-name" required>
                <input type="tel" id="phone" placeholder="Phone Name" autocomplete="tel" required>
                <input type="email" id="email" placeholder="Emaid Id" autocomplete="email" required>
                <input type="button" value="Next" onclick="searchCustomer('create')">
            </form>
        </div>
    </div>
    <div class="grid-review">
        <i class="material-icons" onclick="getServices('divServices','tab2')">widgets</i>
        <label id="lblService" onclick="getServices('divServices','tab2')">Select a Service</label>
        <i class="material-icons " onclick="showCal()">check</i>
    </div>
    <div class="grid hide" id="divServices">
        <div id="svcgrid" class="grid"></div>
    </div>
    <div class="grid-review">
        <i class="material-icons" onclick="showCal()">event</i>
        <label id="lblDate" onclick="showCal()">Select a date</label>
        <i class="material-icons" onclick="showTimePicker()">check</i>
    </div>
    <div class="grid hide" id="divCalendar">
        <div class="cal-header">
            <!-- <i id="prev-m" class="material-icons cal-icon" onclick="minimise()">expand_less</i> -->
            <i id="prev-m" class="material-icons " onclick="localCMY('mon', 'prev')">chevron_left</i>
            <p id="month"></p>
            <i id="next-m" class="material-icons " onclick="localCMY('mon', 'next')">chevron_right</i>
            <i id="prev-y" class="material-icons " onclick="localCMY('year', 'prev')">chevron_left</i>
            <p id="year"></p>
            <i id="next-y" class="material-icons " onclick="localCMY('year', 'next')">chevron_right</i>
            <p id="date">12-Jun-2020</p>
            <i id="icnfold" class="material-icons " onclick="fold('icnfold','cal-container')">expand_less</i>
        </div>
        <div id="cal-container" class="dates-container">
            <div id="cal-dates" class="cal-dates"></div>
        </div>
        <input type="button" value="Next" onclick="showTimePicker()">
    </div>
    <div class="grid-review">
        <i class="material-icons" onclick="setTab('dvTimePicker')">schedule</i>
        <div id="divRes" class="slots" onclick="setTab('dvTimePicker')"></div>
        <i class="material-icons" onclick="hide('dvTimePicker')">check</i>
    </div>
    <!-- Time Picker -->
    <div class="grid hide" id="dvTimePicker">
            <div id="dvTimeline" class="timeline"></div>
    </div>
    <!-- end Date Picker -->
    <div class="grid-review">
        <i class="material-icons" onclick="setTab('divReview')">save</i>
        <label for="" onclick="setTab('divReview')">Save Booking</label>
        <i class="material-icons" onclick="hide('divReview')">check</i>
    </div>
    <div class="grid" id="divReview">
        <label>Send notifications to</label>
        <div class="grid" style="grid-template-columns: 1fr 1fr 1fr 1fr; margin-bottom: 0;">
            <input type="checkbox" placeholder="Notify" value="email" id="notem" onclick="setNotify('email')"><label
                style="margin-left: 0;">Email</label>
            <input type="checkbox" placeholder="Notify" value="phone" id="nottel" onclick="setNotify('phone')"><label
                style="margin-left: 0;">Phone</label>
        </div>
        <button onclick="saveBooking()" id="submit" disabled>Confirm Booking</button>
    </div>

    <div id="divfinal" class="modal grid shdw">
        <div class="mod-content" style="display: block;">
            <p class="fmont">Booking Saved successfully</p>
            <a href="javascript:redirect('booknew.html?bid=')" class="a-settings">Make another booking</a>
            <a href="javascript:redirect('calendar?bid=')" class="a-settings">View Calendar</a>
        </div>
    </div>

    <div class="modal" id="selCustomer">
        <div class="mod-content" style="overflow-y: scroll; height: 60%;">
            <div class="grid bbdr" style="grid-template-columns: 11fr 1fr;">
                <h4>Search Results</h4>
                <i class="material-icons" style="display: inline;"
                    onclick="document.getElementById('selCustomer').style.display='none'">close</i>
            </div>
            <div class="grid results" id="srchResult"></div>
        </div>
    </div>

    <script src="js/calendar.js"></script>
    <script src="js/timepicker.js"></script>
    <script src="js/booknew.js" defer></script>

    <script>
        drawTimeScale('dvTimeline', event.start, event.end);
        function hide(el){get(el).style.display ='none';}
        //***********************************************************************
        setDateClicks();
        function localCMY(mon_year, prev_next) {
            changeMonthYear(mon_year, prev_next);
            setDateClicks();
        }
        var mainNav = get('mainNav');
        var mainIcn = get('mainIcn');
        function togmenu() {
            if (mainNav.style.height == '100%') { mainNav.style.height = "0"; mainIcn.innerText = 'menu'; }
            else { mainNav.style.height = '100%'; mainIcn.innerText = 'close'; }
        }
        //***********************************************************************
    </script>
</body>

</html>